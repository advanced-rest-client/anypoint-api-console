<!doctype html>
<!--
@license
Copyright 2017 Mulesoft.
-->
<!--
This has to be run in a web server. Web component do not work with file:// scheme.
-->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
  <title>API console bundle inspector</title>
  <script src="bower_components/webcomponentsjs/webcomponents-loader.js"></script>
  <link rel="import" href="bower_components/shadycss/apply-shim.html">
  <link rel="import" href="bower_components/polymer/lib/elements/custom-style.html">
  <link rel="import" href="bower_components/iron-flex-layout/iron-flex-layout.html">
  <link rel="import" href="bower_components/raml-aware/raml-aware.html">
  <link rel="import" href="bower_components/api-navigation/api-navigation.html">
  <link rel="import" href="bower_components/api-documentation/api-documentation.html">
  <link rel="import" href="bower_components/api-request-panel/api-request-panel.html">
  <link rel="import" href="bower_components/anypoint-styles/anypoint-theme.html">
  <link rel="import" href="bower_components/xhr-simple-request/xhr-simple-request.html">
  <link rel="import" href="bower_components/oauth-authorization/oauth-authorization.html">
  <link rel="import" href="bower_components/cryptojs-lib/cryptojs-lib.html">
  <!-- <script src="import-detection.js"></script> -->
  <style>
  html,
  body {
    margin: 0;
    font-family: "Open Sans", "DIN Pro", sans-serif;
    -webkit-font-smoothing: antialiased;
  }

  .demo-content > * {
    margin-right: 20px;
    background-color: #fff;
  }

  .demo-content > *:last-child {
    margin-right: 0px;
  }

  api-navigation {
    width: 320px;
  }
  </style>
  <custom-style>
    <style is="custom-style">
    header {
      padding: 12px 24px;
      background-color: #C5E1A5;
    }

    .demo-content {
      padding: 20px;
      @apply --layout-horizontal;
    }

    paper-dropdown-menu {
      background-color: #fff;
    }

    api-documentation {
      max-width: 900px;
      @apply --layout-flex;
    }

    api-request-panel {
      max-width: 900px;
      @apply --layout-flex;
    }

    paper-item:hover  {
      @apply --paper-item-hover;
    }
    </style>
  </custom-style>
</head>
<body unresolved>
  <raml-aware scope="model" id="aware"></raml-aware>
  <xhr-simple-request></xhr-simple-request>
  <oauth1-authorization></oauth1-authorization>
  <oauth2-authorization></oauth2-authorization>
  <header>
    <paper-dropdown-menu label="Select demo API">
      <paper-listbox slot="dropdown-content" id="enpointsList">
        <paper-item data-src="cardconnect-rest-api.json">CardConnect REST API</paper-item>
        <paper-item data-src="catalog.json">catalog-api</paper-item>
        <paper-item data-src="exchange-xapi.json">Exchange Xapi</paper-item>
      </paper-listbox>
    </paper-dropdown-menu>
  </header>
  <div class="demo-content">
    <api-navigation aware="model" summary endpoints-opened></api-navigation>
    <api-documentation aware="model" handle-navigation-events no-try-it></api-documentation>
    <api-request-panel aware="model" handle-navigation-events></api-request-panel>
  </div>
  <script>
  var Demo = {};
  Demo._apiChanged = function(e) {
    var file = e.target.selectedItem.dataset.src;
    Demo._loadFile(file);
  };
  Demo._loadFile = function(file) {
    var xhr = new XMLHttpRequest();
    xhr.addEventListener('load', (e) => {
      let data;
      try {
        data = JSON.parse(e.target.response);
      } catch (e) {
        window.alert('Unable to parse AMF model');
        return;
      }
      document.getElementById('aware').raml = data;
    });
    xhr.addEventListener('error', () => window.alert('Unable to load AMF model'));
    xhr.open('GET', './demo-apis/models/' + file);
    xhr.send();
  };
  Demo.init = function() {
    document.getElementById('enpointsList').selected = 0;
  };
  document.getElementById('enpointsList').addEventListener('selected-changed', Demo._apiChanged);
  window.addEventListener('WebComponentsReady', Demo.init);
  </script>
</body>
</html>
